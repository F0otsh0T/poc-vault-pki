# PKI ENGINE: REQUEST CERTIFICATES









### Request Certificates
Keep certificate lifetimes short to align with Vault's philosophy of short-lived secrets.
1. Execute the following command to request a new certificate for the testngx1.10.10.10.179.xip.io domain based on the xip-dot-io role.
```
# vault write pki_int/issue/demo-svc-cluster-local common_name="poc-00-00.demo.svc.cluster.local" ttl="24h"
Key                 Value
---                 -----
ca_chain            [-----BEGIN CERTIFICATE-----
MIIDsTCCApmgAwIBAgIUfWehJ//wTJxhCQ24d3e768pqwlgwDQYJKoZIhvcNAQEL
BQAwITEfMB0GA1UEAxMWMTA3LjExMi4xNjguMTc5LnhpcC5pbzAeFw0yMDA2MDMy
MTA4MzdaFw0yNTA2MDIyMTA5MDdaMC0xKzApBgNVBAMTImV4YW1wbGUuY29tIElu
dGVybWVkaWF0ZSBBdXRob3JpdHkwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEK
AoIBAQDHVcncTh7JG3dyetESPAs/KIh6mI++mTm4SyA+TtrmIqZfEzwAknv9jCOS
MZfsmEOFsrcAIgWBwLsYY1D3/KAv8p8OWmZhjJM0uNjHwxekcLVcXRR7YK068kD5
PNiCQZgge7Y/XxfAtDK41YVCakfbGJ860vcieOGV/wA36eIV7Ohgr60KTrTW7O1E
EvFQ7bTq23oKZO+FqJklxHq1viM2jRzcWFR7Ln0UnoR7gTB5NbRQYTg0UlGPgZVx
VuBNVIoumdwM/aFY+nHE58/Oneb6L7ggOrbB+VOsOX94xsMfpmNVM21VjTtxVBX7
qioY89s//qE0cZwe+X1aCaqRH76jAgMBAAGjgdQwgdEwDgYDVR0PAQH/BAQDAgEG
MA8GA1UdEwEB/wQFMAMBAf8wHQYDVR0OBBYEFEiQ1oOC99JhCqZtFyTODXM8HVHc
MB8GA1UdIwQYMBaAFJFHU/BRSGwFuhi7Y2RhBqfDM+7rMDsGCCsGAQUFBwEBBC8w
LTArBggrBgEFBQcwAoYfaHR0cDovLzEyNy4wLjAuMTo4MjAwL3YxL3BraS9jYTAx
BgNVHR8EKjAoMCagJKAihiBodHRwOi8vMTI3LjAuMC4xOjgyMDAvdjEvcGtpL2Ny
bDANBgkqhkiG9w0BAQsFAAOCAQEAK2fM0GiZxCqDj5X1QcfXBZKx3JVPBgO40F/T
FG0Y/l7HAyQOBuEflyQQcvmSsXUehYZ/+8r0Ap+BXswWjv50vtmwrdgmH9wkMNwj
TAlLtSRsuKYRU70tyGi0BRauqPdlIZWogxin7ZCFZNfekxwVzcBusjyRf6o4jLhG
5490EAX101WbtcDJiCwwSyznO0kRSf2JzlLafbfzhERfeVgENAAZp3tRYGEhZ+lm
8AXo6nqMuZtDjgWVtcYcL+haHKWx4Z7IU7ZA0/wt9gpiI1EaFlMr9PHuWF5RKyu7
/i0Lx0n2ZlF7ZjJS7QaPVMjoGrFnjlbsFUJ8r7mo+qXQSX8OKw==
-----END CERTIFICATE-----]
certificate         -----BEGIN CERTIFICATE-----
MIIDhDCCAmygAwIBAgIUGsxyRZ4ZNbRwRYG5Laojs3WmdP4wDQYJKoZIhvcNAQEL
BQAwLTErMCkGA1UEAxMiZXhhbXBsZS5jb20gSW50ZXJtZWRpYXRlIEF1dGhvcml0
eTAeFw0yMDA2MDMyMTI4MDNaFw0yMDA2MDQyMTI4MzNaMCoxKDAmBgNVBAMTH3Rl
c3RuZ3gxLjEwNy4xMTIuMTY4LjE3OS54aXAuaW8wggEiMA0GCSqGSIb3DQEBAQUA
A4IBDwAwggEKAoIBAQC/ZsO884EoiE32qzwUVBTYgHtanJNNEReRLgWNl/nvDUCP
/CEqJBclcMA1u70gw4DX9aQXNQygjX1WgOzgkfY5rWtENT5w7kjLJtAYoIRg4Vpq
rTrA3vdl6Zq/TtArYoq1N4JgHHMVoTJO4asMr6zJEboO46g5IifuJf0NaTPn4kHv
ESMKJwqN5q4dKcPtsfc11yABPXcTeEZXXY0WzwIqNPuVXbsYCYAfdpoQV5WzscSo
Bj7942aCP069ZXcIduVrl2SUGUvFjX+elmg3Qns+U/pX7yzsUcK48RRBi9CrHvPW
6j4PmBEz2xqlQvfBtk4/bxGwJ3yoiyCoiWmW8rwZAgMBAAGjgZ4wgZswDgYDVR0P
AQH/BAQDAgOoMB0GA1UdJQQWMBQGCCsGAQUFBwMBBggrBgEFBQcDAjAdBgNVHQ4E
FgQUrFxsa4pelB0woLEPRWiPa89lgc8wHwYDVR0jBBgwFoAUSJDWg4L30mEKpm0X
JM4NczwdUdwwKgYDVR0RBCMwIYIfdGVzdG5neDEuMTA3LjExMi4xNjguMTc5Lnhp
cC5pbzANBgkqhkiG9w0BAQsFAAOCAQEAiF059U8E/L0nw85/QYVJQRlrlZs61B+O
PhcPPUE0Mgil20gNoz7z7+3N516xeBCWzJxFvIvOVlm/ydFzshTgC5AYWTRIsu/a
FgWEKjcq6xDsPCzIaBqKcp8D/JcxNPEBx0FZygkGduv38xzHv89YbELtESfYU+gv
tkjx4nPMF1KWSID4RTwgWBwiCw6YwwQm8oyRcYLK9VKZDuoR/KpgdpMG7Dmfnvxk
AAY17CRICJ+ZkTOsCx5Qls8dJmNJQwFWAZOWcThSy9UMLjqRMIej6bbgisxx7KFb
K4FINo6gFeu0wn8Bs5q3Xno6UdIQc9eCQWW+mrB9gBBdZkKkgGjhIg==
-----END CERTIFICATE-----
expiration          1591306113
issuing_ca          -----BEGIN CERTIFICATE-----
MIIDsTCCApmgAwIBAgIUfWehJ//wTJxhCQ24d3e768pqwlgwDQYJKoZIhvcNAQEL
BQAwITEfMB0GA1UEAxMWMTA3LjExMi4xNjguMTc5LnhpcC5pbzAeFw0yMDA2MDMy
MTA4MzdaFw0yNTA2MDIyMTA5MDdaMC0xKzApBgNVBAMTImV4YW1wbGUuY29tIElu
dGVybWVkaWF0ZSBBdXRob3JpdHkwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEK
AoIBAQDHVcncTh7JG3dyetESPAs/KIh6mI++mTm4SyA+TtrmIqZfEzwAknv9jCOS
MZfsmEOFsrcAIgWBwLsYY1D3/KAv8p8OWmZhjJM0uNjHwxekcLVcXRR7YK068kD5
PNiCQZgge7Y/XxfAtDK41YVCakfbGJ860vcieOGV/wA36eIV7Ohgr60KTrTW7O1E
EvFQ7bTq23oKZO+FqJklxHq1viM2jRzcWFR7Ln0UnoR7gTB5NbRQYTg0UlGPgZVx
VuBNVIoumdwM/aFY+nHE58/Oneb6L7ggOrbB+VOsOX94xsMfpmNVM21VjTtxVBX7
qioY89s//qE0cZwe+X1aCaqRH76jAgMBAAGjgdQwgdEwDgYDVR0PAQH/BAQDAgEG
MA8GA1UdEwEB/wQFMAMBAf8wHQYDVR0OBBYEFEiQ1oOC99JhCqZtFyTODXM8HVHc
MB8GA1UdIwQYMBaAFJFHU/BRSGwFuhi7Y2RhBqfDM+7rMDsGCCsGAQUFBwEBBC8w
LTArBggrBgEFBQcwAoYfaHR0cDovLzEyNy4wLjAuMTo4MjAwL3YxL3BraS9jYTAx
BgNVHR8EKjAoMCagJKAihiBodHRwOi8vMTI3LjAuMC4xOjgyMDAvdjEvcGtpL2Ny
bDANBgkqhkiG9w0BAQsFAAOCAQEAK2fM0GiZxCqDj5X1QcfXBZKx3JVPBgO40F/T
FG0Y/l7HAyQOBuEflyQQcvmSsXUehYZ/+8r0Ap+BXswWjv50vtmwrdgmH9wkMNwj
TAlLtSRsuKYRU70tyGi0BRauqPdlIZWogxin7ZCFZNfekxwVzcBusjyRf6o4jLhG
5490EAX101WbtcDJiCwwSyznO0kRSf2JzlLafbfzhERfeVgENAAZp3tRYGEhZ+lm
8AXo6nqMuZtDjgWVtcYcL+haHKWx4Z7IU7ZA0/wt9gpiI1EaFlMr9PHuWF5RKyu7
/i0Lx0n2ZlF7ZjJS7QaPVMjoGrFnjlbsFUJ8r7mo+qXQSX8OKw==
-----END CERTIFICATE-----
private_key         -----BEGIN RSA PRIVATE KEY-----
MIIEowIBAAKCAQEAv2bDvPOBKIhN9qs8FFQU2IB7WpyTTREXkS4FjZf57w1Aj/wh
KiQXJXDANbu9IMOA1/WkFzUMoI19VoDs4JH2Oa1rRDU+cO5IyybQGKCEYOFaaq06
wN73Zemav07QK2KKtTeCYBxzFaEyTuGrDK+syRG6DuOoOSIn7iX9DWkz5+JB7xEj
CicKjeauHSnD7bH3NdcgAT13E3hGV12NFs8CKjT7lV27GAmAH3aaEFeVs7HEqAY+
/eNmgj9OvWV3CHbla5dklBlLxY1/npZoN0J7PlP6V+8s7FHCuPEUQYvQqx7z1uo+
D5gRM9sapUL3wbZOP28RsCd8qIsgqIlplvK8GQIDAQABAoIBAQCiibxTa14Vc5rx
jHyarsR9Dq6yRiD44zjmOvTQR20hylk3bN8lEDzvuI4hk2qKtjtmKd3NL2mntj/o
A9gk5Q758AEVjTmXYWND0ZQKNdX1B6pmyPEJ9M6XJwgYye8RyL8OITOANuisR5WX
UyCUx2Kt5XXhSwcCbbUHEg+RIfPIR+zAedJMHKJlH1Hc6lJMywChr+BT5DXwniDv
kA7+Tj0fxBy+axZN4m9y/DFv+Ihjbc4urLroWgIlrpZnYjK2BuVToncMwIPtxjve
TFltq/XPo8pIuDYkdAykJu/GcdOej1yCGb2FkcxEvvxowgtnSDVNWpbL6OYzqLMt
D4Zj9bZhAoGBAM1uy0TUuSy/2HY1+BKR6+99l4M3eqhoTDW+AS2DcLuyoCU4FhWI
fSiujF30H/KDq97L+y/5B+r3yslavAx3+yd8CU04qSvbk4Yne4kL5PE/atlNWMcR
YBwBo6hUe15eVkubA/PeQbjKWZT2aBSMlGqRTSkyeS9gJPvPoH1hx9EFAoGBAO6D
yzRybZaN6qN7uO6WKHXa9z9gHkyQDRUSUFshakY3/MXwwtFysc5JEp6Z99hX95zP
zavG3/EwIQ+cair79xqJmILnvp0E8wCz9cCSM9IfizgJy0YV7B3/lh4xAX8mb1nM
wcJx9YdKkh9RtLxS0lPkFHnVrWi0XM1qGv/JebsFAoGAJlOsYswZPCsStIM/JB/L
V+Qjl1yLas4CoegwChDCwJID5M3A+QV87FEcaQ75wuIj964wz/NzMbhHQifGe8EK
v4QZrCmNDlyp+lZ1as0oSoYdZitTC9jHCJKZuPcCCUoqaXKjWyU1N8ewzOTn6CWO
Lw+qyKvdBiS24bAL7jiG8g0CgYBfKL/S7fBhB7/cd8khj1EXLERGya9s9m/xvzvG
D//Zgg7cXiEr9SmRVsAR/PXQH9CPhKzW4uKH1J7sHoiRG7PLp6fsWk9HUCkvV50t
tmbsZ19g/S9Xh/mLQmR/KSgitY/pcPLBBDxkPNEto6iLFjQJ+k5dCW5E/uijn7ij
4pspjQKBgB4gutTkx5BeUJgHBT/Lbzyss8FJyxyrej0Puwqn8iOwjBRG1HW4mlUd
q6gXihvehNAChISQ6iYxSdILqkpWITqVBwIeXdoHUxZmSCCC0BGJJVPUfoLNUokJ
Q2TRApB+fsv6+wbwtJW/UwCxkPK/Zst1zjo94oTjkyRJZz8AlZog
-----END RSA PRIVATE KEY-----
private_key_type    rsa
serial_number       1a:cc:72:45:9e:19:35:b4:70:45:81:b9:2d:aa:23:b3:75:a6:74:fe
```

^^ This is the manual / CLI method of getting this from the PKI Engine dynamically.  Similar functionality exists via Agent Ingection Annotations





